{"version":3,"sources":["webpack:///./src/editor/editor-online.vue?0c87","webpack:///./src/editor/editor-online.vue?0cb5","webpack:///./src/editor/editor-online.vue?abec","webpack:///./src/editor/constants/demo.js","webpack:///./src/editor/constants/language.js","webpack:///./src/editor/utils/parse.js","webpack:///./src/editor/editor-online.vue?ae5f","webpack:///src/editor/editor-online.vue","webpack:///./src/editor.vue?923d","webpack:///src/editor.vue","webpack:///./src/editor/editor-online.vue","webpack:///./src/editor/editor-online.vue?1a25","webpack:///./src/editor.vue","webpack:///./src/editor.vue?d6f8","webpack:///./src/index-entry.js","webpack:///./src/editor/utils/load-script.js","webpack:///./src/preview-entry.js"],"names":["api","content","__esModule","default","module","i","options","exported","locals","exports","___CSS_LOADER_API_IMPORT___","push","demo","languageOptions","codeStr","html","document","createElement","innerHTML","trim","template","querySelector","script","styles","querySelectorAll","map","n","length","test","error","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","_v","model","value","callback","$$v","curTheme","expression","_l","item","key","_s","on","runCode","elementUIDoc","ref","language","highlightLines","onMounted","onCodeChange","staticStyle","iframeLoad","sourceCode","Vue","use","ElementUI","render","h","Editor","$mount","callbacks","loadScript","src","existingScript","getElementById","cb","$script","id","async","body","appendChild","onload","onerror","forEach","Error","bind","onreadystatechange","readyState","$previewApp","newVue","Function","window","addEventListener","event","data","type","code","links","Array","isArray","strs","url","buildLinks","scripts","loadScriptQueue","list","first","shift"],"mappings":"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","file":"common.07aeaf2a.js","sourcesContent":["var api = require(\"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./editor-online.vue?vue&type=style&index=0&lang=scss&\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","import mod from \"-!../../node_modules/style-loader/dist/cjs.js!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./editor-online.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/style-loader/dist/cjs.js!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./editor-online.vue?vue&type=style&index=0&lang=scss&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".editor-online{background:#fff;padding:20px}.editor-online .title{font-size:14px}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","export const demo = `<template>\n  <div>\n    <el-button type=\"primary\" @click=\"handleClick\">点我+1</el-button>\n    <span class=\"count\">{{ count }}</span>\n  </div>\n</template>\n\n<script>\n  export default {\n    name: 'count',\n    data() {\n      return {\n        count: 0\n      };\n    },\n    components: {\n\n    },\n    methods: {\n      handleClick() {\n        this.count ++;\n      }\n    }\n  }\n</script>\n\n<style scoped>\n  .count {\n    padding: 0 10px;\n    color: red;\n  }\n</style>\n`;","export const languageOptions = [\n  'typescript','javascript','html','css','bat','c',\n  'coffeescript','cpp','csharp','csp','dockerfile',\n  'fsharp','go','handlebars','ini','java','json','less',\n  'lua','markdown','msdax','mysql','objective-c','pgsql',\n  'php','plaintext','postiats','powershell','pug','python',\n  'r','razor','redis','redshift','ruby','rust','sb','scss',\n  'sol','sql','swift','vb','xml','yaml'\n];\n","export default function (codeStr) {\n  const html = document.createElement('div');\n  const content = html.innerHTML = codeStr.trim();\n\n  try {\n    const template = html.querySelector('template');\n    const script = html.querySelector('script');\n    const styles = [...html.querySelectorAll('style')].map(n => n.innerHTML);\n\n    if (!template && !script && !styles.length) {\n      return {\n        content,\n        script: content\n      };\n    }\n\n    return {\n      content: /<\\/script>$/g.test(content) ? content : (content + '\\n</script>'),\n      template: template ? template.innerHTML : '',\n      script: script ? script.innerHTML : '',\n      styles: styles\n    };\n\n  } catch (error) {\n    return {\n      error\n    };\n  }\n}","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./editor-online.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./editor-online.vue?vue&type=script&lang=js&\"","<template>\n  <div class=\"editor-online\">\n    <div class=\"main-content\">\n      <el-row>\n        <el-col :span=\"12\">\n          <div>\n            <span class=\"title\">主题切换：</span>\n            <el-radio-group v-model=\"curTheme\">\n              <el-radio v-for=\"item in themeOptions\" :key=\"item\" :label=\"item\" >{{ item }}</el-radio>\n            </el-radio-group>\n          </div>\n        </el-col>\n        <el-col :span=\"12\">\n          <div>\n            <el-button type=\"text\" @click=\"runCode\">刷新</el-button>\n            <el-button type=\"text\" @click=\"elementUIDoc\">element-ui 文档</el-button>\n          </div>\n        </el-col>\n        <el-col :span=\"12\">\n          <monaco-editor\n            width=\"100%\"\n            height=\"1000\"\n            :language=\"language\"\n            :value=\"codeStr\"\n            :options=\"options\"\n            :highlighted=\"highlightLines\"\n            :changeThrottle=\"500\"\n            :theme=\"curTheme\"\n            @mounted=\"onMounted\"\n            @change=\"onCodeChange\"\n            ref=\"vscode\">\n          </monaco-editor>\n        </el-col>\n        <el-col :span=\"12\">\n          <iframe\n            style=\"width: 100%;height:1000px\"\n            ref=\"previewPage\"\n            class=\"result-wrapper\"\n            frameborder=\"0\"\n            src=\"./preview.html\"\n            @load=\"iframeLoad\">\n          </iframe>\n        </el-col>\n      </el-row>\n    </div>\n  </div>\n</template>\n\n<script>\n  import MonacoEditor from 'monaco-editor-vue';\n  import 'monaco-editor/esm/vs/basic-languages/javascript/javascript.contribution';\n  import 'monaco-editor/esm/vs/basic-languages/html/html.contribution';\n  import 'monaco-editor/esm/vs/editor/contrib/find/findController.js';\n  import 'monaco-editor/esm/vs/editor/contrib/bracketMatching/bracketMatching.js';\n  import { demo } from './constants/demo.js';\n  import { languageOptions } from './constants/language.js';\n  import parse from './utils/parse.js';\n\n  export default {\n    name: 'editor-online',\n    props: {\n      sourceCode: {\n        type: String,\n        default: ''\n      }\n    },\n    components: {\n      MonacoEditor\n    },\n    data () {\n      return {\n        codeStr: '',\n        // 编辑器设置\n        language: 'html',   //语言  \n        languageOptions,\n        highlightLines: [{ number: 0, class: 'red' }],  //高亮\n        curTheme: 'vs',\n        themeOptions: ['vs', 'hc-black', 'vs-dark'],  // 编辑器样式\n        options: {\n          foldingStrategy: 'indentation', // 代码可分小段折叠 \n          autoClosingBrackets: true, \n          selectOnLineNumbers: false,\n          roundedSelection: false,\n          readOnly: false,    // 只读\n          cursorStyle: 'line',    //光标样式\n          automaticLayout: true,  //自动布局\n          glyphMargin: true,  //字形边缘\n          useTabStops: false,\n          fontSize: 12,    //字体大小\n          quickSuggestionsDelay: 500,  //代码提示延时\n        }\n      }\n    },\n    watch: {\n      sourceCode: {\n        handler() {\n          this.codeStr = this.sourceCode;\n          this.runCode();\n        },\n        immediate: true\n      }\n    },\n    methods: {\n      iframeLoad() {\n        this.runCode();\n      },\n      elementUIDoc() {\n        window.open('https://element.eleme.io/#/zh-CN/component/button');\n      },\n      onMounted() {\n        this.init();\n      },\n      onCodeChange(value) {\n        this.codeStr = value;\n        this.runCode();\n      },\n      init() {\n        this.codeStr = this.sourceCode || demo;\n        this.runCode();\n      },\n      runCode() {\n        this.codeStr = this.codeStr.replace()\n        const parseObj = parse(this.codeStr);\n        parseObj.script = parseObj.script.replace(/import[^\\;]*\\;/igm, '');\n        parseObj.script = parseObj.script.replace(/components[^\\}]*\\}\\,/igm, '');\n        const postData = {\n          type: 'refreshFrame',\n          data: {\n            template: parseObj.template,\n            script: parseObj.script.replace('export default ', ''),\n            styles: parseObj.styles.join('')\n          }\n        }\n        if (this.$refs.previewPage) {\n          this.$refs.previewPage.contentWindow.postMessage(\n            postData,\n            location.origin\n          )\n        }\n      }\n    }\n  };\n</script>\n\n<style lang=\"scss\">\n  .editor-online {\n    background: #fff;\n    padding: 20px;\n\n    .title {\n      font-size: 14px;\n    }\n  }\n</style>","import mod from \"-!../node_modules/babel-loader/lib/index.js!../node_modules/vue-loader/lib/index.js??vue-loader-options!./editor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/babel-loader/lib/index.js!../node_modules/vue-loader/lib/index.js??vue-loader-options!./editor.vue?vue&type=script&lang=js&\"","<template>\n  <div>\n    <editor-online :source-code=\"sourceCode\"></editor-online>\n  </div>\n</template>\n\n<script>\n  import EditorOnline from './editor/editor-online.vue';\n  import { demo } from './editor/constants/demo.js';\n\n  export default {\n    name: 'editor',\n    components: {\n      EditorOnline\n    },\n    data () {\n      return {\n        sourceCode: demo\n      }\n    }\n  }\n</script>\n\n","import { render, staticRenderFns } from \"./editor-online.vue?vue&type=template&id=23942619&\"\nimport script from \"./editor-online.vue?vue&type=script&lang=js&\"\nexport * from \"./editor-online.vue?vue&type=script&lang=js&\"\nimport style0 from \"./editor-online.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"editor-online\"},[_c('div',{staticClass:\"main-content\"},[_c('el-row',[_c('el-col',{attrs:{\"span\":12}},[_c('div',[_c('span',{staticClass:\"title\"},[_vm._v(\"主题切换：\")]),_vm._v(\" \"),_c('el-radio-group',{model:{value:(_vm.curTheme),callback:function ($$v) {_vm.curTheme=$$v},expression:\"curTheme\"}},_vm._l((_vm.themeOptions),function(item){return _c('el-radio',{key:item,attrs:{\"label\":item}},[_vm._v(_vm._s(item))])}),1)],1)]),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":12}},[_c('div',[_c('el-button',{attrs:{\"type\":\"text\"},on:{\"click\":_vm.runCode}},[_vm._v(\"刷新\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"text\"},on:{\"click\":_vm.elementUIDoc}},[_vm._v(\"element-ui 文档\")])],1)]),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":12}},[_c('monaco-editor',{ref:\"vscode\",attrs:{\"width\":\"100%\",\"height\":\"1000\",\"language\":_vm.language,\"value\":_vm.codeStr,\"options\":_vm.options,\"highlighted\":_vm.highlightLines,\"changeThrottle\":500,\"theme\":_vm.curTheme},on:{\"mounted\":_vm.onMounted,\"change\":_vm.onCodeChange}})],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":12}},[_c('iframe',{ref:\"previewPage\",staticClass:\"result-wrapper\",staticStyle:{\"width\":\"100%\",\"height\":\"1000px\"},attrs:{\"frameborder\":\"0\",\"src\":\"./preview.html\"},on:{\"load\":_vm.iframeLoad}})])],1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./editor.vue?vue&type=template&id=5cf847e5&\"\nimport script from \"./editor.vue?vue&type=script&lang=js&\"\nexport * from \"./editor.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('editor-online',{attrs:{\"source-code\":_vm.sourceCode}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import Vue from 'vue';\nimport ElementUI from 'element-ui';\nimport 'element-ui/lib/theme-chalk/index.css';\nimport Editor from '@src/editor.vue';\n\nVue.use(ElementUI);\n\nnew Vue({\n  render: h => h(Editor)\n}).$mount('#app');\n\n","const callbacks = {}\n\n/**\n * 加载一个远程脚本\n * @param {String} src 一个远程脚本\n * @param {Function} callback 回调\n */\nfunction loadScript(src, callback) {\n  const existingScript = document.getElementById(src)\n  const cb = callback || (() => {})\n  if (!existingScript) {\n    callbacks[src] = []\n    const $script = document.createElement('script')\n    $script.src = src\n    $script.id = src\n    $script.async = 1\n    document.body.appendChild($script)\n    const onEnd = 'onload' in $script ? stdOnEnd.bind($script) : ieOnEnd.bind($script)\n    onEnd($script)\n  }\n\n  callbacks[src].push(cb)\n\n  function stdOnEnd(script) {\n    script.onload = () => {\n      this.onerror = this.onload = null\n      callbacks[src].forEach(item => {\n        item(null, script)\n      })\n      delete callbacks[src]\n    }\n    script.onerror = () => {\n      this.onerror = this.onload = null\n      cb(new Error(`Failed to load ${src}`), script)\n    }\n  }\n\n  function ieOnEnd(script) {\n    script.onreadystatechange = () => {\n      if (this.readyState !== 'complete' && this.readyState !== 'loaded') return\n      this.onreadystatechange = null\n      callbacks[src].forEach(item => {\n        item(null, script)\n      })\n      delete callbacks[src]\n    }\n  }\n}\n\n/**\n * 顺序加载一组远程脚本\n * @param {Array} list 一组远程脚本\n * @param {Function} cb 回调\n */\nexport function loadScriptQueue(list, cb) {\n  const first = list.shift()\n  list.length ? loadScript(first, () => loadScriptQueue(list, cb)) : loadScript(first, cb)\n}\n\nexport default loadScript\n","import Vue from 'vue';\nimport ElementUI from 'element-ui';\nimport 'element-ui/lib/theme-chalk/index.css';\nimport { loadScriptQueue } from './editor/utils/load-script.js';\n\nVue.use(ElementUI);\n\nconst $previewApp = document.getElementById('app');\n\nwindow.addEventListener('message', init, false);\n\nfunction buildLinks(links) {\n  let strs = '';\n  links.forEach(url => {\n    strs += `<link href=\"${url}\" rel=\"stylesheet\">`;\n  });\n  return strs;\n}\n\nfunction init(event) {\n  if (event.data.type === 'refreshFrame') {\n    const code = event.data.data;\n    let links = '';\n\n    if (Array.isArray(code.links) && code.links.length > 0) {\n      links = buildLinks(code.links);\n    }\n\n    $previewApp.innerHTML = `${links}<style>${code.styles}</style><div id=\"preview\"></div>`;\n\n    if (Array.isArray(code.scripts) && code.scripts.length > 0) {\n      loadScriptQueue(code.scripts, () => {\n        newVue(code.script, code.template);\n      })\n    } else {\n      newVue(code.script, code.template);\n    }\n  }\n}\n\nfunction createObject(body) {\n  return (new Function('', `return ${body}`))();\n}\n\nfunction newVue(script, template) {\n  script = createObject(`(${script})`);\n  script.template = `<div>${template}</div>`\n  new Vue({\n    ...script\n  }).$mount('#preview');\n}\n"],"sourceRoot":""}